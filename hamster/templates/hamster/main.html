{% extends 'core/base.html' %}

{% block content %}
<style>
    /* 1. ì¼€ì´ì§€ ê¸°ë³¸ í‹€ */
    .cage-wrapper {
        perspective: 1000px;
        padding: 40px 0;
        background-color: #f8f9fa;
    }

    .cage-outer {
        position: relative;
        width: 100%;
        max-width: 600px;
        margin: 0 auto;
        background: #5d4037; 
        border: 15px solid #3e2723;
        border-radius: 30px;
        box-shadow: 0 30px 60px rgba(0,0,0,0.4);
        overflow: hidden;
    }

    .cage-inner {
        position: relative;
        height: 500px;
        background: linear-gradient(to bottom, #fff9c4 0%, #fbc02d 100%);
        display: flex;
        justify-content: center;
        align-items: flex-end;
    }

    /* 2. ì°½ì‚´ (ì•ë©´) */
    .cage-bars {
        position: absolute;
        top: 0; left: 0; width: 100%; height: 100%;
        background: repeating-linear-gradient(
            to right,
            rgba(0,0,0,0.1) 0px, /* 0.15ì—ì„œ 0.1ë¡œ ë‚®ì¶¤ */
            rgba(0,0,0,0.1) 2px,
            transparent 2px,
            transparent 40px
        );
        z-index: 20;
        pointer-events: none;
    }

    /* 3. í†±ë°¥ (ë°”ë‹¥) */
    .wood-shavings {
        position: absolute;
        bottom: 0; width: 100%; height: 120px;
        background: #ffe0b2;
        border-top: 5px solid #ffcc80;
        z-index: 8; /* í–„ìŠ¤í„°(10~12)ë³´ë‹¤ ì•„ë˜ë¡œ ë‚´ë¦¼ */
        opacity: 1; /* í†±ë°¥ë„ ë¶ˆíˆ¬ëª…í•˜ê²Œ */
    }

    /* 4. [í•µì‹¬] ìˆœìˆ˜ CSS í–„ìŠ¤í„° ëª¨ë¸ */
    .hamster-container {
        position: relative;
        z-index: 10; /* ì°½ì‚´ë³´ë‹¨ ì•„ë˜, í†±ë°¥ë³´ë‹¨ ì‚´ì§ ì•„ë˜(íŒŒë¬»íŒ ëŠë‚Œ) */
        bottom: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        animation: breathing 3s infinite ease-in-out;
    }

    /* í–„ìŠ¤í„° ëª¸ì²´ - íˆ¬ëª…ë„ë¥¼ ì—†ì• ê³  ìƒ‰ìƒì„ ë” ì„ ëª…í•˜ê²Œ! */
    .hamster-body {
        position: relative;
        width: 140px;
        height: 120px;
        background: #f3e5ab; /* ê¸°ì¡´ ìƒ‰ìƒ ìœ ì§€í•˜ë˜ íˆ¬ëª…ë„ ì—†ìŒ */
        border-radius: 50% 50% 45% 45%;
        box-shadow: 
            inset -8px -8px 15px rgba(0,0,0,0.1), /* ì…ì²´ê° ê·¸ë¦¼ì */
            5px 10px 20px rgba(0,0,0,0.1);      /* ë°”ë‹¥ì— ì§€ëŠ” ê·¸ë¦¼ì */
        z-index: 12; /* í†±ë°¥ë³´ë‹¤ í™•ì‹¤íˆ ìœ„ë¡œ! */
        opacity: 1 !important; /* íˆ¬ëª…ë„ 0% (ì™„ì „ ë¶ˆíˆ¬ëª…) */
    }

    .ear {
        position: absolute;
        width: 35px; height: 35px;
        background: #ffcdd2;
        border: 4px solid #f3e5ab;
        border-radius: 50%;
        top: -10px;
    }
    .ear-l { left: 15px; }
    .ear-r { right: 15px; }

    .eye {
        position: absolute;
        width: 12px; height: 12px;
        background: #333;
        border-radius: 50%;
        top: 45px;
        animation: blink 4s infinite;
    }
    .eye-l { left: 35px; }
    .eye-r { right: 35px; }

    .nose {
        position: absolute;
        width: 10px; height: 8px;
        background: #ffab91;
        border-radius: 50%;
        top: 60px; left: 65px;
    }

    .cheek {
        position: absolute;
        width: 40px; height: 30px;
        background: #ff8a80;
        opacity: 0.2;
        border-radius: 50%;
        top: 65px;
    }
    .cheek-l { left: 15px; }
    .cheek-r { right: 15px; }

    /* 5. ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
    @keyframes breathing {
        0%, 100% { transform: scale(1) translateY(0); }
        50% { transform: scale(1.03) translateY(-5px); }
    }

    @keyframes blink {
        0%, 90%, 100% { transform: scaleY(1); }
        95% { transform: scaleY(0.1); }
    }

    /* 6. ìƒíƒœ UI íŒ¨ë„ */
    .status-panel {
        position: absolute;
        top: 20px; left: 20px;
        z-index: 30;
        background: rgba(255,255,255,0.9);
        padding: 15px;
        border-radius: 20px;
        width: 200px;
        border: 2px solid #f39c12;
    }
</style>

<div class="cage-wrapper">
    <div class="cage-outer">
        <div class="status-panel shadow-sm">
            <h5 class="fw-bold mb-1">ğŸ¹ {{ hamster.name }}</h5>
            <div class="small text-muted mb-2">Lv.{{ hamster.level }} í–„ì°Œ</div>
            
            <div class="progress mb-2" style="height: 8px;">
                <div class="progress-bar bg-danger" style="width: {{ hamster.hunger }}%"></div>
            </div>
            <div class="progress" style="height: 8px;">
                <div class="progress-bar bg-warning" style="width: {{ hamster.happiness }}%"></div>
            </div>
        </div>

        <div class="cage-inner">
            <div class="cage-bars"></div> <div class="hamster-container">
                <div class="hamster-body">
                    <div class="ear ear-l"></div>
                    <div class="ear ear-r"></div>
                    <div class="eye eye-l"></div>
                    <div class="eye eye-r"></div>
                    <div class="nose"></div>
                    <div class="cheek cheek-l"></div>
                    <div class="cheek cheek-r"></div>
                </div>
            </div>

            <div class="wood-shavings"></div> </div>
    </div>

    <div class="text-center mt-5">
        <div class="d-flex justify-content-center gap-3">
            <button class="btn btn-warning btn-lg rounded-pill px-5 shadow fw-bold">ğŸŒ» í•´ë°”ë¼ê¸°ì”¨</button>
            <button class="btn btn-info btn-lg rounded-pill px-5 shadow text-white fw-bold">ğŸ¡ ì³‡ë°”í€´</button>
        </div>
    </div>
</div>
{% endblock %}